@{
    Layout = null;
}
@model Swizzle.Models.Post.PostDetailPageViewModel

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

    <link href="~/css/goswizzle.css" rel="stylesheet" />
    <link href="~/css/post-detail.css" rel="stylesheet" />


</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="https://picsum.photos/120/30" alt="Reddit Logo">
            </a>

            <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="d-flex flex-grow-1 justify-content-center">
                <div class="search-bar">
                    <input type="search" class="form-control" placeholder="Search Reddit">
                </div>
            </div>

            <div class="d-flex align-items-center gap-2">
                <button class="btn btn-outline-primary">Log In</button>
                <button class="btn btn-primary">Sign Up</button>
            </div>
        </div>
    </nav>

    <!-- Add this after the navbar -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarMenu">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">Menu</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body">
            <!-- Mobile-only login buttons -->
            <div class="d-lg-none mb-3">
                <button class="btn btn-outline-primary w-100 mb-2">Log In</button>
                <button class="btn btn-primary w-100">Sign Up</button>
            </div>

            <!-- Sidebar content (will be moved here on mobile) -->
            <div class="sidebar-content">
                <!-- Copy the entire left-sidebar content here -->
                <!-- Left Sidebar -->
                <aside class="left-sidebar">
                    <div class="sidebar-section">
                        <div class="topic-group">
                            <h6>RECENT</h6>
                            <div class="topic-item">
                                <i class="fas fa-code"></i>
                                r/programming
                            </div>
                            <div class="topic-item">
                                <i class="fas fa-laptop-code"></i>
                                r/webdev
                            </div>
                            <div class="topic-item">r/programming</div>
                            <div class="topic-item">r/webdev</div>
                            <div class="topic-item">r/dotnet</div>
                        </div>

                        <div class="topic-group">
                            <h6>TOPICS</h6>
                            <div class="topic-item">Gaming</div>
                            <div class="topic-item">Sports</div>
                            <div class="topic-item">Technology</div>
                        </div>

                        <div class="topic-group">
                            <h6>RESOURCES</h6>
                            <div class="topic-item">Community Rules</div>
                            <div class="topic-item">Premium</div>
                            <div class="topic-item">Help Center</div>
                        </div>
                    </div>
                </aside>

            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Sidebar -->
        <aside class="left-sidebar">
            <div class="sidebar-section">
                <div class="topic-group">
                    <h6>RECENT</h6>
                    <div class="topic-item">
                        <i class="fas fa-code"></i>
                        r/programming
                    </div>
                    <div class="topic-item">
                        <i class="fas fa-laptop-code"></i>
                        r/webdev
                    </div>
                    <div class="topic-item">r/programming</div>
                    <div class="topic-item">r/webdev</div>
                    <div class="topic-item">r/dotnet</div>
                </div>

                <div class="topic-group">
                    <h6>TOPICS</h6>
                    <div class="topic-item">Gaming</div>
                    <div class="topic-item">Sports</div>
                    <div class="topic-item">Technology</div>
                </div>

                <div class="topic-group">
                    <h6>RESOURCES</h6>
                    <div class="topic-item">Community Rules</div>
                    <div class="topic-item">Premium</div>
                    <div class="topic-item">Help Center</div>
                </div>
            </div>
        </aside>
         

        <main class="main-content">
            <!-- Main post content - similar to our post card but with full content -->
            <div class="post-detail-container">
                <!-- Full Post Content -->
                <article class="post-detail sidebar-section mb-3">
                    <div class="vote-column">
                        <button class="vote-btn upvote">
                            <i class="fas fa-arrow-up"></i>
                        </button>
                        <span class="vote-count">@Model.Post.VoteCount</span>
                        <button class="vote-btn downvote">
                            <i class="fas fa-arrow-down"></i>
                        </button>
                    </div>

                    <div class="post-content">
                        <div class="post-header">
                            <a href="#" class="subreddit-link">@Model.Post.Community</a>
                            <span class="post-metadata">
                                • Posted by <a href="#" class="user-link">u/@Model.Post.PosterName</a>
                                <span class="post-time">@Model.Post.TimePosted</span>
                            </span>
                        </div>

                        <h1 class="post-detail-title">
                            @Model.Post.Title
                        </h1>

                        <div class="post-body">
                            @Model.Post.Content
                        </div>

                        <div class="post-footer">
                            <button class="post-action-btn">
                                <i class="fas fa-comment-alt"></i>
                                <span>@Model.Post.CommentCount Comments</span>
                            </button>
                            <button class="post-action-btn">
                                <i class="fas fa-share"></i>
                                <span>Share</span>
                            </button>
                            <button class="post-action-btn">
                                <i class="fas fa-bookmark"></i>
                                <span>Save</span>
                            </button>
                            <button class="post-action-btn">
                                <i class="fas fa-ellipsis-h"></i>
                            </button>
                        </div>
                    </div>
                </article>

                <!-- Comment Section -->
                <section class="comments-section sidebar-section">
                    <!-- Comment Sort -->
                    <div class="comment-sort mb-3">
                        <span>Sort by: </span>
                        <select class="form-select form-select-sm d-inline-block w-auto">
                            <option>Best</option>
                            <option>Top</option>
                            <option>New</option>
                            <option>Controversial</option>
                            <option>Old</option>
                        </select>
                    </div>

                    <!-- Comment Input -->
                    <div class="comment-input mb-4">
                        <textarea class="form-control mb-2" rows="4" placeholder="What are your thoughts?"></textarea>
                        <button class="btn btn-primary">Comment</button>
                    </div>

                    <!-- Comments Thread -->
                    <div class="comments-thread">

                        @foreach(var comment in Model.Comments)
                        {
                            <div class="comment-container">
                                <div class="vote-column small">
                                    <button class="vote-btn upvote">
                                        <i class="fas fa-arrow-up"></i>
                                    </button>
                                    <span class="vote-count">@comment.VoteCount</span>
                                    <button class="vote-btn downvote">
                                        <i class="fas fa-arrow-down"></i>
                                    </button>
                                </div>

                                <div class="comment-content">
                                    <div class="comment-header">
                                        <a href="#" class="user-link">u/@comment.PosterName</a>
                                        <span class="comment-time">@comment.TimePosted</span>
                                    </div>

                                    <div class="comment-body">
                                        <p>@comment.Content</p>
                                    </div>

                                    <div class="comment-actions">
                                        <button class="comment-action-btn">
                                            <i class="fas fa-reply"></i>
                                            Reply
                                        </button>
                                        <button class="comment-action-btn">
                                            <i class="fas fa-gift"></i>
                                            Award
                                        </button>
                                        <button class="comment-action-btn">
                                            <i class="fas fa-share"></i>
                                            Share
                                        </button>
                                        <button class="comment-action-btn">
                                            <i class="fas fa-flag"></i>
                                            Report
                                        </button>
                                    </div>

                                    @foreach(var reply in comment.Replies)
                                    {
                                        <!-- Nested Reply -->
                                        <div class="comment-replies">
                                            <div class="comment-container">
                                                <div class="vote-column small">
                                                    <button class="vote-btn upvote">
                                                        <i class="fas fa-arrow-up"></i>
                                                    </button>
                                                    <span class="vote-count">@reply.VoteCount</span>
                                                    <button class="vote-btn downvote">
                                                        <i class="fas fa-arrow-down"></i>
                                                    </button>
                                                </div>

                                                <div class="comment-content">
                                                    <div class="comment-header">
                                                        <a href="#" class="user-link">@reply.PosterName</a>
                                                        @if(reply.PosterName == Model.Post.PosterName)
                                                        {
                                                            <span class="op-tag">OP</span>
                                                        }
                                                       
                                                        <span class="comment-time">@reply.TimePosted</span>
                                                    </div>

                                                    <div class="comment-body">
                                                        <p>@reply.Content</p>
                                                    </div>

                                                    <div class="comment-actions">
                                                        <button class="comment-action-btn">
                                                            <i class="fas fa-reply"></i>
                                                            Reply
                                                        </button>
                                                        <button class="comment-action-btn">
                                                            <i class="fas fa-gift"></i>
                                                            Award
                                                        </button>
                                                        <button class="comment-action-btn">
                                                            <i class="fas fa-share"></i>
                                                            Share
                                                        </button>
                                                        <button class="comment-action-btn">
                                                            <i class="fas fa-flag"></i>
                                                            Report
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }

                                    
                                </div>
                            </div>
                        }

                         
                    </div>
                </section>
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="right-sidebar">
            <div class="sidebar-section">
                <div class="ad-container">
                    Advertisement Space
                </div>
            </div>

            <div class="sidebar-section">
                <h6 class="mb-3">Recommended Posts</h6>
                <div class="topic-item">Trending Post #1</div>
                <div class="topic-item">Trending Post #2</div>
                <div class="topic-item">Trending Post #3</div>
            </div>
        </aside>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>